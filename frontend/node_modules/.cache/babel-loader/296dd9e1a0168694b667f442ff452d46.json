{"ast":null,"code":"var _jsxFileName = \"D:\\\\Users\\\\ozcelik\\\\Desktop\\\\workspace\\\\frontend\\\\src\\\\pages\\\\UserSignupPage.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Input from \"../components/Input\";\nimport { useTranslation } from \"react-i18next\";\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\nimport { useApiProgress, withApiProgress } from \"../shared/ApiProgress\";\nimport { useDispatch } from \"react-redux\";\nimport { signupHandler } from \"../redux/authActions\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst UserSignupPage = props => {\n  _s();\n\n  const [form, setForm] = useState({\n    username: null,\n    displayName: null,\n    password: null,\n    passwordRepeat: null\n  });\n  const [errors, setErrors] = useState({});\n  const dispatch = useDispatch();\n\n  const onChange = event => {\n    const {\n      name,\n      value\n    } = event.target;\n    setErrors(previousError => ({ ...previousError,\n      [name]: undefined\n    }));\n    setForm(previousForm => ({ ...previousForm,\n      [name]: value\n    }));\n  };\n\n  const onClickSignUp = async event => {\n    event.preventDefault();\n    const {\n      history\n    } = props;\n    const {\n      push\n    } = history;\n    const {\n      username,\n      displayName,\n      password\n    } = form;\n    const body = {\n      username,\n      displayName,\n      password\n    };\n\n    try {\n      await dispatch(signupHandler(body));\n      push(\"/\");\n    } catch (error) {\n      if (error.response.data.validationErrors) {\n        setErrors(error.response.data.validationErrors);\n      }\n    }\n  };\n\n  const {\n    t\n  } = useTranslation();\n  const pendingApiCall = useApiProgress;\n  const {\n    username: usernameError,\n    displayName: displayNameError,\n    password: passwordError\n  } = errors;\n  let passwordRepeatError;\n\n  if (form.password !== form.passwordRepeat) {\n    passwordRepeatError = t(\"Password mismatch\");\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-center \",\n        children: t(\"Sign Up\")\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"username\",\n        label: t(\"Username\"),\n        error: usernameError,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"displayName\",\n        label: t(\"Display Name\"),\n        error: displayNameError,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"password\",\n        label: t(\"Password\"),\n        type: \"password\",\n        error: passwordError,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        name: \"passwordRepeat\",\n        label: t(\"Password Repeat\"),\n        type: \"password\",\n        error: passwordRepeatError,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center\",\n        children: /*#__PURE__*/_jsxDEV(ButtonWithProgress, {\n          onClick: onClickSignUp,\n          disabled: pendingApiCall || passwordRepeatError !== undefined,\n          pendingApiCall: pendingApiCall,\n          text: t(\"Sign Up\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n\n_s(UserSignupPage, \"BUKxcXSi6K3o+R3Vdr+lZyIfWnU=\", false, function () {\n  return [useDispatch, useTranslation];\n});\n\n_c = UserSignupPage;\nconst UserSignupPageWithApiProgressForSignupRequest = withApiProgress(UserSignupPage, \"/api/1.0/users\");\n_c2 = UserSignupPageWithApiProgressForSignupRequest;\nconst UserSignupPageWithApiProgressForAuthRequest = withApiProgress(UserSignupPageWithApiProgressForSignupRequest, \"/api/1.0/auth\");\n_c3 = UserSignupPageWithApiProgressForAuthRequest;\nexport default UserSignupPageWithApiProgressForAuthRequest;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"UserSignupPage\");\n$RefreshReg$(_c2, \"UserSignupPageWithApiProgressForSignupRequest\");\n$RefreshReg$(_c3, \"UserSignupPageWithApiProgressForAuthRequest\");","map":{"version":3,"sources":["D:/Users/ozcelik/Desktop/workspace/frontend/src/pages/UserSignupPage.js"],"names":["React","useState","Input","useTranslation","ButtonWithProgress","useApiProgress","withApiProgress","useDispatch","signupHandler","UserSignupPage","props","form","setForm","username","displayName","password","passwordRepeat","errors","setErrors","dispatch","onChange","event","name","value","target","previousError","undefined","previousForm","onClickSignUp","preventDefault","history","push","body","error","response","data","validationErrors","t","pendingApiCall","usernameError","displayNameError","passwordError","passwordRepeatError","UserSignupPageWithApiProgressForSignupRequest","UserSignupPageWithApiProgressForAuthRequest"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Input from \"../components/Input\";\r\nimport { useTranslation } from \"react-i18next\";\r\nimport ButtonWithProgress from \"../components/ButtonWithProgress\";\r\nimport { useApiProgress, withApiProgress } from \"../shared/ApiProgress\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { signupHandler } from \"../redux/authActions\";\r\n\r\nconst UserSignupPage = (props) => {\r\n  const [form, setForm] = useState({\r\n    username: null,\r\n    displayName: null,\r\n    password: null,\r\n    passwordRepeat: null,\r\n  });\r\n  const [errors, setErrors] = useState({});\r\n  const dispatch = useDispatch();\r\n\r\n  const onChange = (event) => {\r\n    const { name, value } = event.target;\r\n    setErrors((previousError) => ({ ...previousError, [name]: undefined }));\r\n    setForm((previousForm) => ({ ...previousForm, [name]: value }));\r\n  };\r\n\r\n  const onClickSignUp = async (event) => {\r\n    event.preventDefault();\r\n    const { history } = props;\r\n    const { push } = history;\r\n    const { username, displayName, password } = form;\r\n    const body = {\r\n      username,\r\n      displayName,\r\n      password,\r\n    };\r\n    try {\r\n      await dispatch(signupHandler(body));\r\n      push(\"/\");\r\n    } catch (error) {\r\n      if (error.response.data.validationErrors) {\r\n        setErrors(error.response.data.validationErrors);\r\n      }\r\n    }\r\n  };\r\n\r\n  const { t } = useTranslation();\r\n  const pendingApiCall  = useApiProgress;\r\n  const {\r\n    username: usernameError,\r\n    displayName: displayNameError,\r\n    password: passwordError,\r\n  } = errors;\r\n  let passwordRepeatError;\r\n  if (form.password !== form.passwordRepeat) {\r\n    passwordRepeatError = t(\"Password mismatch\");\r\n  }\r\n  return (\r\n    <div className=\"container\">\r\n      <form>\r\n        <h1 className=\"text-center \">{t(\"Sign Up\")}</h1>\r\n        <Input\r\n          name=\"username\"\r\n          label={t(\"Username\")}\r\n          error={usernameError}\r\n          onChange={onChange}\r\n        />\r\n        <Input\r\n          name=\"displayName\"\r\n          label={t(\"Display Name\")}\r\n          error={displayNameError}\r\n          onChange={onChange}\r\n        />\r\n        <Input\r\n          name=\"password\"\r\n          label={t(\"Password\")}\r\n          type=\"password\"\r\n          error={passwordError}\r\n          onChange={onChange}\r\n        />\r\n        <Input\r\n          name=\"passwordRepeat\"\r\n          label={t(\"Password Repeat\")}\r\n          type=\"password\"\r\n          error={passwordRepeatError}\r\n          onChange={onChange}\r\n        />\r\n\r\n        <div className=\"text-center\">\r\n          <ButtonWithProgress\r\n            onClick={onClickSignUp}\r\n            disabled={pendingApiCall || passwordRepeatError !== undefined}\r\n            pendingApiCall={pendingApiCall}\r\n            text={t(\"Sign Up\")}\r\n          />\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst UserSignupPageWithApiProgressForSignupRequest = withApiProgress(\r\n  UserSignupPage,\r\n  \"/api/1.0/users\"\r\n);\r\nconst UserSignupPageWithApiProgressForAuthRequest = withApiProgress(\r\n  UserSignupPageWithApiProgressForSignupRequest,\r\n  \"/api/1.0/auth\"\r\n);\r\n\r\nexport default UserSignupPageWithApiProgressForAuthRequest;\r\n"]},"metadata":{},"sourceType":"module"}